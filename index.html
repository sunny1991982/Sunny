<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sunny Shop - ‡∏£‡∏∞‡∏ö‡∏ö‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏™‡∏°‡∏≤‡∏ä‡∏¥‡∏Å</title>
    <link href="https://fonts.googleapis.com/css2?family=Kanit:wght@300;400;600&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        :root { --primary: #FF8C00; --secondary: #FFD700; --accent: #FF4500; --bg: #FFFDF0; --blue-auth: #0000FF; }
        * { margin: 0; padding: 0; box-sizing: border-box; font-family: 'Kanit', sans-serif; }
        
        /* ‡∏™‡πÑ‡∏ï‡∏•‡πå‡∏´‡∏ô‡πâ‡∏≤ Login (‡∏Ñ‡∏á‡πÄ‡∏î‡∏¥‡∏°) */
        .auth-body { background: #e0e0e0; display: flex; justify-content: center; align-items: center; min-height: 100vh; }
        .auth-card { background: white; width: 90%; max-width: 400px; padding: 30px; border-radius: 20px; border: 2px solid var(--blue-auth); box-shadow: 0 10px 25px rgba(0,0,0,0.1); text-align: center; }
        .btn-auth { width: 100%; padding: 12px; border: none; border-radius: 10px; font-weight: 600; cursor: pointer; margin-top: 10px; background: var(--blue-auth); color: white; }

        /* ‡∏™‡πÑ‡∏ï‡∏•‡πå‡∏´‡∏ô‡πâ‡∏≤‡πÄ‡∏ß‡πá‡∏ö Sunny Shop */
        #shop-view { display: none; background-color: var(--bg); min-height: 100vh; }
        nav { background: linear-gradient(135deg, var(--primary), var(--secondary)); padding: 1rem 5%; display: flex; justify-content: space-between; align-items: center; color: white; }
        .container { max-width: 900px; margin: auto; padding: 20px; }
        
        /* ‡∏ï‡∏≤‡∏£‡∏≤‡∏á‡∏£‡∏≤‡∏¢‡∏ä‡∏∑‡πà‡∏≠‡πÉ‡∏ô‡∏´‡∏•‡∏±‡∏á‡∏ö‡πâ‡∏≤‡∏ô */
        #admin-panel { background: white; border: 2px solid var(--primary); padding: 25px; border-radius: 20px; margin-bottom: 30px; display: none; }
        .member-table { width: 100%; border-collapse: collapse; margin-top: 15px; font-size: 0.9rem; }
        .member-table th, .member-table td { border: 1px solid #eee; padding: 10px; text-align: left; }
        .member-table th { background: #fdf2e2; }
        .btn-magic { background: #28a745; color: white; border: none; padding: 5px 10px; border-radius: 5px; cursor: pointer; }
        
        .card { background: white; border-radius: 18px; padding: 20px; box-shadow: 0 4px 12px rgba(0,0,0,0.05); margin-bottom: 20px; }
    </style>
</head>
<body class="auth-body" id="main-body">

<div id="auth-view" class="auth-card">
    <h2 id="auth-title" style="color:var(--blue-auth)">Sunny Shop</h2>
    <div id="login-form">
        <input type="text" id="login-user" style="width:100%; padding:12px; margin:10px 0;" placeholder="‡∏ä‡∏∑‡πà‡∏≠‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ">
        <input type="password" id="login-pass" style="width:100%; padding:12px; margin:10px 0;" placeholder="‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô">
        <button class="btn-auth" onclick="handleLogin()">‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö</button>
        <p onclick="toggleAuth(false)" style="cursor:pointer; margin-top:10px; font-size:0.8rem; color:blue;">‡∏™‡∏°‡∏±‡∏Ñ‡∏£‡∏™‡∏°‡∏≤‡∏ä‡∏¥‡∏Å</p>
    </div>
    <div id="register-form" style="display: none;">
        <input type="text" id="reg-user" style="width:100%; padding:12px; margin:10px 0;" placeholder="‡∏ä‡∏∑‡πà‡∏≠‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡πÉ‡∏´‡∏°‡πà">
        <input type="password" id="reg-pass" style="width:100%; padding:12px; margin:10px 0;" placeholder="‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô‡πÉ‡∏´‡∏°‡πà">
        <button class="btn-auth" onclick="handleRegister()">‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏™‡∏°‡∏±‡∏Ñ‡∏£</button>
        <p onclick="toggleAuth(true)" style="cursor:pointer; margin-top:10px; font-size:0.8rem;">‡∏Å‡∏•‡∏±‡∏ö‡πÑ‡∏õ‡∏•‡πá‡∏≠‡∏Å‡∏≠‡∏¥‡∏ô</p>
    </div>
</div>

<div id="shop-view">
    <nav>
        <div style="font-weight:800;">‚òÄÔ∏è SUNNY SHOP</div>
        <div>
            <span id="user-display" style="margin-right:10px; font-size:0.8rem;"></span>
            <button onclick="showAdminAuth()" style="background:none; border:none; color:white; cursor:pointer;"><i class="fas fa-cog"></i></button>
            <button onclick="logout()" style="background:none; border:none; color:white; cursor:pointer; margin-left:10px;"><i class="fas fa-sign-out-alt"></i></button>
        </div>
    </nav>

    <div class="container">
        <div class="card" style="text-align:center;">
            <h3>üí∞ ‡πÄ‡∏Ñ‡∏£‡∏î‡∏¥‡∏ï‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì: <span id="credit-val" style="color:var(--accent); font-size:2rem;">0</span> ‡∏ø</h3>
        </div>

        <div id="admin-panel">
            <div style="display:flex; justify-content:space-between; align-items:center;">
                <h3 style="color:var(--accent);"><i class="fas fa-users-cog"></i> ‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏™‡∏°‡∏≤‡∏ä‡∏¥‡∏Å & ‡πÄ‡∏™‡∏Å‡πÄ‡∏á‡∏¥‡∏ô</h3>
                <button onclick="exitAdmin()">‡∏õ‡∏¥‡∏î‡∏´‡∏•‡∏±‡∏á‡∏ö‡πâ‡∏≤‡∏ô</button>
            </div>
            
            <div style="margin-top:20px; background:#fff3cd; padding:15px; border-radius:10px;">
                <p><strong>‡∏ß‡∏¥‡∏ò‡∏µ‡πÄ‡∏™‡∏Å‡πÄ‡∏á‡∏¥‡∏ô:</strong> ‡πÉ‡∏™‡πà‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡πÄ‡∏á‡∏¥‡∏ô‡πÉ‡∏ô‡∏ä‡πà‡∏≠‡∏á "‡∏à‡∏≥‡∏ô‡∏ß‡∏ô" ‡∏ó‡πâ‡∏≤‡∏¢‡∏ä‡∏∑‡πà‡∏≠‡∏™‡∏°‡∏≤‡∏ä‡∏¥‡∏Å‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£ ‡πÅ‡∏•‡πâ‡∏ß‡∏Å‡∏î "‡πÄ‡∏™‡∏Å‡πÄ‡∏á‡∏¥‡∏ô"</p>
                <table class="member-table">
                    <thead>
                        <tr>
                            <th>‡∏ä‡∏∑‡πà‡∏≠‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ</th>
                            <th>‡πÄ‡∏Ñ‡∏£‡∏î‡∏¥‡∏ï‡∏õ‡∏±‡∏à‡∏à‡∏∏‡∏ö‡∏±‡∏ô</th>
                            <th>‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏ó‡∏µ‡πà‡∏à‡∏∞‡πÄ‡∏™‡∏Å</th>
                            <th>‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£</th>
                        </tr>
                    </thead>
                    <tbody id="member-list-body">
                        </tbody>
                </table>
            </div>

            <hr style="margin:20px 0;">
            <h4>üì¶ ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡πÉ‡∏´‡∏°‡πà</h4>
            <input type="text" id="p-name" placeholder="‡∏ä‡∏∑‡πà‡∏≠‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤" style="width:100%; padding:10px; margin:5px 0;">
            <input type="number" id="p-price" placeholder="‡∏£‡∏≤‡∏Ñ‡∏≤" style="width:100%; padding:10px; margin:5px 0;">
            <input type="password" id="p-secret" placeholder="‡∏£‡∏´‡∏±‡∏™‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤" style="width:100%; padding:10px; margin:5px 0;">
            <button onclick="addNewProduct()" style="background:var(--primary); color:white; border:none; width:100%; padding:10px; border-radius:5px; margin-top:5px;">‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤</button>
        </div>

        <div id="product-list" class="grid"></div>
    </div>
</div>

<script>
    // ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏à‡∏≥‡∏•‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡πÄ‡∏Å‡πá‡∏ö‡∏™‡∏°‡∏≤‡∏ä‡∏¥‡∏Å (‡πÉ‡∏ô‡∏£‡∏∞‡∏ö‡∏ö‡∏à‡∏£‡∏¥‡∏á‡∏Ñ‡∏ß‡∏£‡πÉ‡∏ä‡πâ Database)
    let members = JSON.parse(localStorage.getItem('sunny_members')) || {};
    let shopItems = JSON.parse(localStorage.getItem('sunny_items')) || [];
    let currentUser = "";

    function toggleAuth(isLogin) {
        document.getElementById('login-form').style.display = isLogin ? 'block' : 'none';
        document.getElementById('register-form').style.display = isLogin ? 'none' : 'block';
    }

    function handleRegister() {
        const u = document.getElementById('reg-user').value;
        const p = document.getElementById('reg-pass').value;
        if(u && p) {
            if(members[u]) return alert('‡∏ä‡∏∑‡πà‡∏≠‡∏ô‡∏µ‡πâ‡∏°‡∏µ‡∏Ñ‡∏ô‡πÉ‡∏ä‡πâ‡πÅ‡∏•‡πâ‡∏ß');
            members[u] = { password: p, credit: 0 };
            localStorage.setItem('sunny_members', JSON.stringify(members));
            alert('‡∏™‡∏°‡∏±‡∏Ñ‡∏£‡∏™‡∏°‡∏≤‡∏ä‡∏¥‡∏Å‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à!');
            toggleAuth(true);
        }
    }

    function handleLogin() {
        const u = document.getElementById('login-user').value;
        const p = document.getElementById('login-pass').value;
        if(members[u] && members[u].password === p) {
            currentUser = u;
            sessionStorage.setItem('isLogged', 'true');
            sessionStorage.setItem('user', u);
            enterShop();
        } else { alert('‡∏ä‡∏∑‡πà‡∏≠‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡∏´‡∏£‡∏∑‡∏≠‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô‡∏ú‡∏¥‡∏î'); }
    }

    function enterShop() {
        document.getElementById('main-body').classList.remove('auth-body');
        document.getElementById('auth-view').style.display = 'none';
        document.getElementById('shop-view').style.display = 'block';
        document.getElementById('user-display').innerText = `‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ: ${currentUser}`;
        updateUI();
    }

    function updateUI() {
        document.getElementById('credit-val').innerText = members[currentUser].credit.toLocaleString();
        renderAdminMemberList();
        // ‡∏™‡πà‡∏ß‡∏ô‡πÅ‡∏™‡∏î‡∏á‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤ (‡∏Ç‡πâ‡∏≤‡∏°‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÉ‡∏´‡πâ‡πÇ‡∏Ñ‡πâ‡∏î‡∏Å‡∏£‡∏∞‡∏ä‡∏±‡∏ö)
    }

    // --- ‡∏£‡∏∞‡∏ö‡∏ö‡∏´‡∏•‡∏±‡∏á‡∏ö‡πâ‡∏≤‡∏ô‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡πÅ‡∏≠‡∏î‡∏°‡∏¥‡∏ô ---
    function renderAdminMemberList() {
        const tbody = document.getElementById('member-list-body');
        tbody.innerHTML = Object.keys(members).map(username => `
            <tr>
                <td>${username} ${username === currentUser ? '(‡∏Ñ‡∏∏‡∏ì)' : ''}</td>
                <td id="credit-${username}">${members[username].credit} ‡∏ø</td>
                <td><input type="number" id="input-${username}" placeholder="‡∏£‡∏∞‡∏ö‡∏∏‡πÄ‡∏á‡∏¥‡∏ô..." style="width:80px; padding:5px;"></td>
                <td><button class="btn-magic" onclick="magicAddCreditToUser('${username}')">‡πÄ‡∏™‡∏Å‡πÄ‡∏á‡∏¥‡∏ô</button></td>
            </tr>
        `).join('');
    }

    function magicAddCreditToUser(targetUser) {
        const amount = parseFloat(document.getElementById(`input-${targetUser}`).value);
        if(amount > 0) {
            members[targetUser].credit += amount;
            localStorage.setItem('sunny_members', JSON.stringify(members));
            alert(`üîÆ ‡πÄ‡∏™‡∏Å‡πÄ‡∏á‡∏¥‡∏ô‡πÉ‡∏´‡πâ‡∏Ñ‡∏∏‡∏ì ${targetUser} ‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢: ${amount} ‡∏ø`);
            updateUI();
        } else { alert('‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÉ‡∏™‡πà‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡πÄ‡∏á‡∏¥‡∏ô'); }
    }

    function showAdminAuth() {
        if(prompt('‡∏£‡∏´‡∏±‡∏™‡πÅ‡∏≠‡∏î‡∏°‡∏¥‡∏ô:') === "19911217") {
            document.getElementById('admin-panel').style.display = 'block';
            renderAdminMemberList();
        }
    }

    function exitAdmin() { document.getElementById('admin-panel').style.display = 'none'; }
    function logout() { sessionStorage.clear(); location.reload(); }

    window.onload = () => {
        if(sessionStorage.getItem('isLogged') === 'true') {
            currentUser = sessionStorage.getItem('user');
            enterShop();
        }
    };
</script>
</body>
    </html>
    
