<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sunny Shop - ‡∏£‡∏∞‡∏ö‡∏ö‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏™‡∏°‡∏≤‡∏ä‡∏¥‡∏Å</title>
    <link href="https://fonts.googleapis.com/css2?family=Kanit:wght@300;400;600&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        :root { --primary: #FF8C00; --secondary: #FFD700; --accent: #FF4500; --bg: #FFFDF0; --blue-auth: #0000FF; }
        * { margin: 0; padding: 0; box-sizing: border-box; font-family: 'Kanit', sans-serif; }
        
        /* ‡∏´‡∏ô‡πâ‡∏≤ Login/Register (‡∏™‡πÑ‡∏ï‡∏•‡πå‡∏ï‡∏≤‡∏°‡∏£‡∏π‡∏õ‡∏ó‡∏µ‡πà‡∏Ñ‡∏∏‡∏ì‡∏™‡πà‡∏á‡∏°‡∏≤) */
        .auth-body { background: #f0f2f5; display: flex; justify-content: center; align-items: center; min-height: 100vh; padding: 20px; }
        .auth-card { background: white; width: 100%; max-width: 450px; padding: 40px; border-radius: 15px; border: 2px solid var(--blue-auth); box-shadow: 0 10px 25px rgba(0,0,0,0.1); text-align: center; }
        .auth-card h2 { color: var(--blue-auth); font-size: 2rem; margin-bottom: 20px; font-weight: 800; }
        .auth-label { display: block; text-align: left; font-weight: 600; color: var(--blue-auth); margin: 15px 0 5px; }
        .input-box { width: 100%; padding: 12px; border: 1px solid #ddd; border-radius: 8px; background: #f9f9f9; outline: none; font-size: 1rem; }
        .btn-auth-main { width: 100%; padding: 14px; background: var(--blue-auth); color: white; border: none; border-radius: 8px; font-weight: 600; cursor: pointer; margin-top: 25px; font-size: 1.1rem; }
        .btn-auth-sub { width: 100%; padding: 12px; background: white; color: var(--blue-auth); border: 1px solid var(--blue-auth); border-radius: 8px; font-weight: 600; cursor: pointer; margin-top: 10px; }

        /* ‡∏´‡∏ô‡πâ‡∏≤ Shop */
        #shop-view { display: none; background-color: var(--bg); min-height: 100vh; }
        nav { background: linear-gradient(135deg, var(--primary), var(--secondary)); padding: 15px 5%; display: flex; justify-content: space-between; align-items: center; color: white; box-shadow: 0 4px 10px rgba(0,0,0,0.1); position: sticky; top: 0; z-index: 100; }
        .container { max-width: 1000px; margin: auto; padding: 20px; }
        .card { background: white; border-radius: 15px; padding: 25px; box-shadow: 0 4px 15px rgba(0,0,0,0.05); margin-bottom: 25px; }
        .wallet-display { text-align: center; border: 2px solid var(--secondary); }
        .grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(280px, 1fr)); gap: 20px; }
        .btn-buy { width: 100%; padding: 12px; background: var(--accent); color: white; border: none; border-radius: 10px; cursor: pointer; font-weight: 600; margin-top: 10px; }
        
        /* ‡πÅ‡∏≠‡∏î‡∏°‡∏¥‡∏ô */
        #admin-panel { display: none; background: #fffbe6; border: 2px dashed var(--primary); padding: 20px; border-radius: 15px; margin-bottom: 25px; }
        .member-row { display: flex; justify-content: space-between; align-items: center; padding: 10px; border-bottom: 1px solid #eee; }
    </style>
</head>
<body class="auth-body" id="main-body">

<div id="auth-view" class="auth-card">
    <h2 id="auth-title">SUNNY SHOP</h2>
    
    <div id="login-form">
        <label class="auth-label"><i class="fas fa-user"></i> ‡∏ä‡∏∑‡πà‡∏≠‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ</label>
        <input type="text" id="login-user" class="input-box" placeholder="‡∏Å‡∏£‡∏≠‡∏Å‡∏ä‡∏∑‡πà‡∏≠‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô">
        <label class="auth-label"><i class="fas fa-lock"></i> ‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô</label>
        <input type="password" id="login-pass" class="input-box" placeholder="‡∏Å‡∏£‡∏≠‡∏Å‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô">
        <button class="btn-auth-main" onclick="handleLogin()">‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö</button>
        <button class="btn-auth-sub" onclick="toggleToRegister()">‡∏™‡∏°‡∏±‡∏Ñ‡∏£‡∏™‡∏°‡∏≤‡∏ä‡∏¥‡∏Å</button>
    </div>

    <div id="register-form" style="display: none;">
        <label class="auth-label"><i class="fas fa-user-plus"></i> ‡∏ï‡∏±‡πâ‡∏á‡∏ä‡∏∑‡πà‡∏≠‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡πÉ‡∏´‡∏°‡πà</label>
        <input type="text" id="reg-user" class="input-box" placeholder="‡∏Å‡∏£‡∏≠‡∏Å‡∏ä‡∏∑‡πà‡∏≠‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô">
        <label class="auth-label"><i class="fas fa-key"></i> ‡∏ï‡∏±‡πâ‡∏á‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô</label>
        <input type="password" id="reg-pass" class="input-box" placeholder="‡∏Å‡∏£‡∏≠‡∏Å‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô">
        <label class="auth-label"><i class="fas fa-check-circle"></i> ‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô‡∏≠‡∏µ‡∏Å‡∏Ñ‡∏£‡∏±‡πâ‡∏á</label>
        <input type="password" id="reg-pass-confirm" class="input-box" placeholder="‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô">
        <button class="btn-auth-main" onclick="handleRegister()">‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏™‡∏°‡∏±‡∏Ñ‡∏£‡∏™‡∏°‡∏≤‡∏ä‡∏¥‡∏Å</button>
        <button class="btn-auth-sub" onclick="toggleToLogin()">‡∏Å‡∏•‡∏±‡∏ö‡πÑ‡∏õ‡∏´‡∏ô‡πâ‡∏≤‡∏•‡πá‡∏≠‡∏Å‡∏≠‡∏¥‡∏ô</button>
    </div>
</div>

<div id="shop-view">
    <nav>
        <div style="font-size: 1.5rem; font-weight: 800;">SUNNY SHOP</div>
        <div style="display: flex; gap: 15px;">
            <button onclick="toggleHistory()" style="background:none; border:none; color:white; cursor:pointer;"><i class="fas fa-history"></i> ‡∏õ‡∏£‡∏∞‡∏ß‡∏±‡∏ï‡∏¥</button>
            <button onclick="showAdminAuth()" style="background:none; border:none; color:white; cursor:pointer;"><i class="fas fa-user-shield"></i></button>
            <button onclick="logout()" style="background:none; border:none; color:white; cursor:pointer;"><i class="fas fa-power-off"></i></button>
        </div>
    </nav>

    <div class="container">
        <div class="card wallet-display">
            <p>‡∏™‡∏ß‡∏±‡∏™‡∏î‡∏µ‡∏Ñ‡∏∏‡∏ì <strong id="display-name"></strong></p>
            <h1 style="color: var(--accent); font-size: 3rem; margin: 10px 0;"><span id="credit-val">0</span> ‡∏ø</h1>
            <div style="display: flex; gap: 10px; max-width: 500px; margin: 15px auto;">
                <input type="text" id="gift-link" class="input-box" placeholder="‡∏ß‡∏≤‡∏á‡∏•‡∏¥‡πâ‡∏á‡∏Å‡πå‡∏ã‡∏≠‡∏á‡∏≠‡∏±‡πà‡∏á‡πÄ‡∏õ‡∏≤...">
                <button onclick="topUp()" style="background:var(--primary); color:white; border:none; padding:10px 20px; border-radius:8px; cursor:pointer;">‡πÄ‡∏ï‡∏¥‡∏°‡πÄ‡∏á‡∏¥‡∏ô</button>
            </div>
        </div>

        <div id="admin-panel" class="card">
            <h3 style="color: var(--accent); margin-bottom:15px;">üõ†Ô∏è ‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏™‡∏°‡∏≤‡∏ä‡∏¥‡∏Å & ‡πÄ‡∏™‡∏Å‡πÄ‡∏á‡∏¥‡∏ô</h3>
            <div id="admin-member-list"></div>
            <hr style="margin:20px 0;">
            <h4>üì¶ ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡πÉ‡∏´‡∏°‡πà</h4>
            <input type="text" id="p-name" class="input-box" placeholder="‡∏ä‡∏∑‡πà‡∏≠‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤" style="margin-top:10px;">
            <input type="number" id="p-price" class="input-box" placeholder="‡∏£‡∏≤‡∏Ñ‡∏≤" style="margin-top:10px;">
            <input type="number" id="p-stock" class="input-box" placeholder="‡∏™‡∏ï‡πá‡∏≠‡∏Å" style="margin-top:10px;">
            <input type="text" id="p-secret" class="input-box" placeholder="‡∏£‡∏´‡∏±‡∏™‡πÑ‡∏≠‡∏î‡∏µ/‡∏û‡∏≤‡∏™ (‡∏•‡∏±‡∏ö)" style="margin-top:10px;">
            <button onclick="addNewProduct()" style="width:100%; margin-top:15px; padding:12px; background:var(--primary); color:white; border:none; border-radius:8px; cursor:pointer;">‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤</button>
        </div>

        <div id="history-section" class="card" style="display:none;">
            <h3>üìã ‡∏õ‡∏£‡∏∞‡∏ß‡∏±‡∏ï‡∏¥‡∏Å‡∏≤‡∏£‡∏ã‡∏∑‡πâ‡∏≠</h3>
            <div id="history-list"></div>
        </div>

        <div id="product-list" class="grid"></div>
    </div>
</div>

<script>
    // ‡∏î‡∏∂‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏à‡∏≤‡∏Å‡∏ê‡∏≤‡∏ô‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏à‡∏≥‡∏•‡∏≠‡∏á (LocalStorage)
    let members = JSON.parse(localStorage.getItem('sunny_members')) || {};
    let shopItems = JSON.parse(localStorage.getItem('sunny_items')) || [];
    let currentUser = sessionStorage.getItem('logged_user') || "";

    // ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏™‡∏•‡∏±‡∏ö‡∏´‡∏ô‡πâ‡∏≤
    function toggleToRegister() {
        document.getElementById('login-form').style.display = 'none';
        document.getElementById('register-form').style.display = 'block';
        document.getElementById('auth-title').innerText = '‡∏™‡∏°‡∏±‡∏Ñ‡∏£‡∏™‡∏°‡∏≤‡∏ä‡∏¥‡∏Å';
    }

    function toggleToLogin() {
        document.getElementById('login-form').style.display = 'block';
        document.getElementById('register-form').style.display = 'none';
        document.getElementById('auth-title').innerText = 'SUNNY SHOP';
    }

    // ‡∏£‡∏∞‡∏ö‡∏ö‡∏™‡∏°‡∏±‡∏Ñ‡∏£‡∏™‡∏°‡∏≤‡∏ä‡∏¥‡∏Å
    function handleRegister() {
        const u = document.getElementById('reg-user').value.trim();
        const p = document.getElementById('reg-pass').value.trim();
        const pc = document.getElementById('reg-pass-confirm').value.trim();

        if(!u || !p || !pc) return alert("‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏£‡∏≠‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÉ‡∏´‡πâ‡∏Ñ‡∏£‡∏ö‡∏ó‡∏∏‡∏Å‡∏ä‡πà‡∏≠‡∏á");
        if(p !== pc) return alert("‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô‡πÑ‡∏°‡πà‡∏ï‡∏£‡∏á‡∏Å‡∏±‡∏ô");
        if(members[u]) return alert("‡∏ä‡∏∑‡πà‡∏≠‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡∏ô‡∏µ‡πâ‡∏ñ‡∏π‡∏Å‡πÉ‡∏ä‡πâ‡πÑ‡∏õ‡πÅ‡∏•‡πâ‡∏ß");

        // ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏™‡∏°‡∏≤‡∏ä‡∏¥‡∏Å‡πÉ‡∏´‡∏°‡πà
        members[u] = { password: p, credit: 0, history: [] };
        localStorage.setItem('sunny_members', JSON.stringify(members));
        alert("‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏ö‡∏±‡∏ç‡∏ä‡∏µ‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à! ‡∏¢‡∏¥‡∏ô‡∏î‡∏µ‡∏ï‡πâ‡∏≠‡∏ô‡∏£‡∏±‡∏ö‡∏Ñ‡∏£‡∏±‡∏ö");
        toggleToLogin();
    }

    // ‡∏£‡∏∞‡∏ö‡∏ö‡∏•‡πá‡∏≠‡∏Å‡∏≠‡∏¥‡∏ô
    function handleLogin() {
        const u = document.getElementById('login-user').value.trim();
        const p = document.getElementById('login-pass').value.trim();

        if(members[u] && members[u].password === p) {
            currentUser = u;
            sessionStorage.setItem('logged_user', u);
            enterShop();
        } else {
            alert("‡∏ä‡∏∑‡πà‡∏≠‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡∏´‡∏£‡∏∑‡∏≠‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô‡πÑ‡∏°‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á");
        }
    }

    function enterShop() {
        document.getElementById('main-body').style.background = "#FFFDF0";
        document.getElementById('auth-view').style.display = 'none';
        document.getElementById('shop-view').style.display = 'block';
        document.getElementById('display-name').innerText = currentUser;
        refreshUI();
    }

    function refreshUI() {
        document.getElementById('credit-val').innerText = members[currentUser].credit.toLocaleString();
        renderProducts();
        renderHistory();
        renderAdminMembers();
    }

    function renderProducts() {
        const list = document.getElementById('product-list');
        list.innerHTML = shopItems.map(item => `
            <div class="card">
                <h3>${item.name}</h3>
                <h2 style="color:var(--accent); margin:10px 0;">${item.price} ‡∏ø</h2>
                <p>‡∏Ñ‡∏á‡πÄ‡∏´‡∏•‡∏∑‡∏≠: ${item.stock}</p>
                <button class="btn-buy" onclick="buyItem(${item.id})">‡∏ã‡∏∑‡πâ‡∏≠‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤</button>
            </div>
        `).join('');
    }

    function buyItem(id) {
        const item = shopItems.find(i => i.id === id);
        if(members[currentUser].credit < item.price) return alert("‡πÄ‡∏á‡∏¥‡∏ô‡πÑ‡∏°‡πà‡∏û‡∏≠‡∏Ñ‡∏£‡∏±‡∏ö");
        if(item.stock <= 0) return alert("‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏´‡∏°‡∏î‡πÅ‡∏•‡πâ‡∏ß");

        members[currentUser].credit -= item.price;
        item.stock -= 1;
        members[currentUser].history.unshift({ name: item.name, secret: item.secret, date: new Date().toLocaleString() });
        save();
        refreshUI();
        alert("‡∏ã‡∏∑‡πâ‡∏≠‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à!");
    }

    function renderHistory() {
        const list = document.getElementById('history-list');
        const h = members[currentUser].history || [];
        list.innerHTML = h.map(x => `<div style="padding:10px; border-bottom:1px solid #eee;"><strong>${x.name}</strong><br><span style="color:green;">‡∏£‡∏´‡∏±‡∏™: ${x.secret}</span></div>`).join('');
    }

    function toggleHistory() {
        const s = document.getElementById('history-section');
        s.style.display = s.style.display === 'none' ? 'block' : 'none';
    }

    function showAdminAuth() {
        if(prompt("‡∏£‡∏´‡∏±‡∏™‡πÅ‡∏≠‡∏î‡∏°‡∏¥‡∏ô:") === "19911217") {
            document.getElementById('admin-panel').style.display = 'block';
            refreshUI();
        }
    }

    function renderAdminMembers() {
        const list = document.getElementById('admin-member-list');
        list.innerHTML = Object.keys(members).map(u => `
            <div class="member-row">
                <span>${u} (${members[u].credit} ‡∏ø)</span>
                <div>
                    <button onclick="editMoney('${u}', 1)" style="color:green;">+ ‡πÄ‡∏™‡∏Å</button>
                    <button onclick="editMoney('${u}', -1)" style="color:red;">- ‡∏´‡∏±‡∏Å</button>
                </div>
            </div>
        `).join('');
    }

    function editMoney(user, type) {
        const amt = parseFloat(prompt("‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡πÄ‡∏á‡∏¥‡∏ô:"));
        if(amt > 0) {
            members[user].credit += (amt * type);
            save(); refreshUI();
        }
    }

    function addNewProduct() {
        const n = document.getElementById('p-name').value, p = parseFloat(document.getElementById('p-price').value), s = parseInt(document.getElementById('p-stock').value), sec = document.getElementById('p-secret').value;
        if(n && p >= 0) {
            shopItems.push({ id: Date.now(), name: n, price: p, stock: s, secret: sec });
            save(); refreshUI(); alert("‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÅ‡∏•‡πâ‡∏ß!");
        }
    }

    function topUp() {
        const link = document.getElementById('gift-link').value;
        if(link.includes("truemoney")) {
            members[currentUser].credit += 50; save(); refreshUI();
            alert("‡πÄ‡∏ï‡∏¥‡∏°‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à 50 ‡∏ö‡∏≤‡∏ó (‡∏à‡∏≥‡∏•‡∏≠‡∏á)");
        }
    }

    function save() {
        localStorage.setItem('sunny_members', JSON.stringify(members));
        localStorage.setItem('sunny_items', JSON.stringify(shopItems));
    }

    function logout() { sessionStorage.clear(); location.reload(); }
    window.onload = () => { if(currentUser) enterShop(); };
</script>
</body>
    </html>
    
